### 你怎么理解操作系统里的内存碎片，有什么解决办法？

  内存碎片通常分为内部碎片和外部碎片： 

​    1. 内部碎片是由于采用**固定大小的内存分区**，当一个进程不能完全使用分给它的固定内存区域时就会产生内部碎片，通常内部碎片难以完全避免；
 

​    2.外部碎片是由于**某些未分配的连续内存区域太小**，以至于不能满足任意进程的内存分配请求，从而不能被进程利用的内存区域。
 

​    现在普遍采取的内存分配方式是段页式内存分配。将内存分为不同的段，再将每一段分成固定大小的页。通过页表机制，使段内的页可以不必连续处于同一内存区域。

### 虚拟内存的作用

虚拟内存提供了三个重要的能力： **缓存**，**内存管理**，**内存保护**

1. 将主存视为一个存储在磁盘上的地址空间的高速缓存，在主存中只保存活动区域，并根据需要在磁盘和主存之间来回传送数据

2. 为每个进程提供了**一致的地址空间**，**简化内存管理**

3. 保护了每个进程的**地址空间不被其他进程破坏**

### 虚拟地址到物理地址的转换步骤

1. 根据逻辑地址得到段号、页号和页内偏移量
2. 查询段表找到对应的段表项，找到页表存放的块号
3. 找到对应页表，用过页号查询到对应的表项
4. 用实际块号+页内偏移量访存
5. 一共是三次访问内存，如有快表，可以加速